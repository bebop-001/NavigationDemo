<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8"/>
	<title></title>
	<meta name="generator" content="LibreOffice 6.0.7.3 (Linux)"/>
	<meta name="created" content="2019-05-02T08:29:36.029218114"/>
	<meta name="changed" content="2019-05-02T10:03:59.251664812"/>
	<style type="text/css">
		p { margin-bottom: 0.1in; line-height: 115% }
		p.western { font-family: "Arial", sans-serif }
		h2.western { font-family: "Arial", sans-serif; font-size: 16pt }
		h2.cjk { font-family: "Noto Sans CJK JP Regular"; font-size: 16pt }
		h2.ctl { font-family: "Lohit Devanagari"; font-size: 16pt }
		a:link { so-language: zxx }
	</style>
</head>
<body lang="en-US" bgcolor="#fffff0" dir="ltr">
<h2 class="western">About</h2>
<p class="western" style="margin-bottom: 0in; line-height: 100%">This
is a simple app meant to demo how the code works.  It doesn't really
do anything significant: It is written do demonstrate Kotlin,
Data-Binding and the new Navigation libraries.  The event listeners
work and use data-binding.</p>
<p class="western" style="margin-bottom: 0in; line-height: 100%"><br/>

</p>
<p class="western" style="margin-bottom: 0in; line-height: 100%">This
code contains only the data binding.  I plan on creating a simple
menu and implement fragment navagation before I'm done.</p>
<p class="western" style="margin-bottom: 0in; line-height: 100%"><br/>

</p>
<p class="western" style="margin-bottom: 0in; line-height: 100%">I
wrote this kotlin app using data binding while taking a Udacity class
on programming Android apps using Kotlin.  I tried to use the things
I'd learned in the class to create a trivial app and so I'd know I
understood what I was studying.  I couldn't make that simple app
work.  
</p>
<p class="western" style="margin-bottom: 0in; line-height: 100%"><br/>

</p>
<p class="western" style="margin-bottom: 0in; line-height: 100%">After
spinning my wheels for about a week I finally understood that there
were multiple things going on.  First and most significant, there
were changes necessary to the gradle dependencies that weren't
covered in the class.  Also at the same time, Google was making lots
of changes to get things working.  AndroidStudio 3.2 wasn't behaving
as shown in the class, the underlying classes were all beta and
things were changing in the environment more quickly than I could
follow.</p>
<p class="western" style="margin-bottom: 0in; line-height: 100%"><br/>

</p>
<p class="western" style="margin-bottom: 0in; line-height: 100%">I've
tried to make my git checkins easy to follow so you can see what was
changed at each step along the way.</p>
<p class="western" style="margin-bottom: 0in; line-height: 100%"><br/>

</p>
<p class="western" style="margin-bottom: 0in; line-height: 100%">This
code requires AndroidStudio 3.4 or better, Gradle 5.11 or better
Android build tools 3.4 or better and Kotlin 1.3.31 or better.</p>
<h2 class="western">Steps to build the app</h2>
<ol>
	<li/>
<p class="western">Create a basic vanilla Kotlin
	application<br/>
Create a new project in Android Studio.  Make sure
	it's a Kotlin project with an empty activity and support back to
	API-19.  I also removed the test directories.  I won't be using them
	for this app.<br/>
<br/>
In my git repository the commit is
	'InitialCode'.</p>
	<li/>
<p class="western">Add changes necessary to gradle (mostly) to
	support data binding</p>
</ol>
<ul>
	<ul>
		<li/>
<p class="western">gradle.properties<br/>
add lines so
		android x can be
		used.<br/>
<font color="#0066b3"><i>android.enableJetifier=true<br/>
</i></font><font color="#0066b3"><i>android.useAndroidX=true</i></font></p>
		<li/>
<p class="western">app/build.gradle<br/>
Add these lines to
		the android section to enable data-binding:<br/>
<font color="#0066b3"><i>dataBinding
		{</i></font><font color="#0066b3"><i><br/>
</i></font><font color="#0066b3"><i>
		       enabled true</i></font><font color="#0066b3"><i><br/>
</i></font><font color="#0066b3"><i>
		}</i></font><font color="#0066b3"><i><br/>
</i></font><font color="#000000"><span style="font-style: normal">In
		the dependencies section remove the implementation stuff for tests.
		 We removed the test directories in Step 1.<br/>
<br/>
Remove the
		com.android.support for appcompat and
		constraint-layout.<br/>
</span></font><font color="#000000"><span style="font-style: normal"><b>Data-Binding
		is not supported for constraint layout.</b></span></font><font color="#000000"><span style="font-style: normal"><br/>
We
		will be using the androidx appcompat library.<br/>
To the
		dependencies add:<br/>
	</span></font><font color="#0066b3"><i>implementation
		'androidx.appcompat:appcompat:1.0.0-beta01'<br/>
</i></font><font color="#000000"><span style="font-style: normal">By
		the time you do this, this the version will probably have changed.</span></font></p>
		<li/>
<p class="western">app/src/main/res/layout/activity_main.xml<br/>
Change
		the constraint layout to a LinearLayout and remove the constraint
		stuff from the text view.  As noted above, constraint-layout does
		not currently support data-layout. <br/>
<br/>
Give the textview an
		id of textview_tv1.<br/>
<br/>
The LinearLayout gets wrapped in a
		&lt;layout&gt; tag.   Move the name-space declarations in the
		LinearLayout to the new &lt;layout&gt; tag.<br/>
<br/>
Add a button
		for the testi code.  Give an id of button_btn1.</p>
		<li/>
<p class="western">app/src/main/java/com/kana_tutor/navigationdemo/MainActivity.kt<br/>
Remove<br/>
	<font color="#ed4c05"><i>import
		android.support.v7.app.AppCompatActivity</i></font><br/>
with<br/>
	<font color="#0066b3"><i>import
		androidx.appcompat.app.AppCompatActivity</i></font></p>
		<li/>
<p class="western">app/src/main/res/values/strings.xml<br/>
Several
		strings were defined here when I set up the button and textview
		above.</p>
	</ul>
</ul>
<p class="western" style="margin-left: 0.49in">At this point your
code should compile and execute.  After your build you will find a
new Java Class File: <b>databinding/ActivityMainBinding.java</b>. 
This is where the 'data-binding' magic happens.  Note that
<b>ActivityMainBinding</b> is a name mangled version of
<b>activity_main.xml</b> and in this file you will find public static
declarations for buttonBtn1 and textviewTv1.  These are the
name-mangled versions of button_btn_1 textview_tv_1 you added to
activity_main.xml.  <i><b>Knowing about these generated files is key
to understanding how data-binding works</b></i>.<br/>
<br/>
<br/>

</p>
<ol start="3">
	<li/>
<p class="western">Add button onClick listener to
	MainActivity.kt:<br/>
The main thing of note is the creation of an
	&quot;ActivityMainBinding binding&quot; in the onCreate method.  As
	noted above,  ActivityMainBinding is a generated class that contains
	declarations for the view objects (by id) created in the
	activity_main.xml layout file.   ActivityMainBinding supplies many
	of the classes used by data binding such as the setOnClickListener
	method used to create the button listener.</p>
</ol>
</body>
</html>